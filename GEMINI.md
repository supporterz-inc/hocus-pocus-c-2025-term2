Statement of Work (SOW): Hocus Pocus ベースアプリケーション開発
===============================================================================

I. 概要
-------------------------------------------------------------------------------

本ドキュメントは、ナレッジ (技術記事) 共有プラットフォーム「Hocus Pocus」のベースとなるアプリケーション開発の作業範囲を定義するものである。
プロジェクトのコンセプト (`README.md` に記載) に基づき、本アプリケーションはサマーインターンシップ等に参加するエンジニア志望の学生が、3 日間程度の短期間で機能開発を体験するための「素体」として機能することを目的とする。

そのため、実装は特定の思想に偏らない "ニュートラルな設計" を基本とし、学生がコードの全体像を理解しやすく、かつ自由に機能拡張のアイデアを試せるようなシンプルな構造を目指す。


II. プロジェクトの目的
-------------------------------------------------------------------------------

- 学生が 3 日間で達成感を得られるような、適切な難易度と拡張性を持つ Web アプリケーションのコードベースを提供すること
- モダンな Web 開発の基本的な要素 (認証，CRUD，API など) を実践的に学べる教材として活用できること
- チーム開発におけるコミュニケーションの土台となる、明確でシンプルな初期要件を定義すること


III. 主要機能要件 (ベースアプリケーションのスコープ)
-------------------------------------------------------------------------------

最低限実装されているべき機能は以下の通りとする。
ただし、`✅` マークが付与されている項目は、Initial Commit に実装済みとなる。

### III.1. ユーザー認証機能

- ✅ Cloudflare Zero Trust を用いて、ユーザー認証機能の代わりとする

### III.2. ナレッジ管理機能 (CRUD)

- **ナレッジ作成 (Create)** : ナレッジを Markdown 形式で記述し、作成できる
- **ナレッジ一覧表示 (Read)** : ✅ 作成されたナレッジの一覧を、誰でも閲覧できる
- **ナレッジ詳細表示 (Read)** : 特定のナレッジの詳細ページを、誰でも閲覧できる
- **ナレッジ更新 (Update)** : 自分が投稿したナレッジの内容を、後から編集できる
- **ナレッジ削除 (Delete)** : 自分が投稿したナレッジを、削除できる


IV. 非機能要件 (ベースアプリケーションのスコープ)
-------------------------------------------------------------------------------

- **技術スタック:**
    - Node.js をランタイムとして、JavaScript コードを実行する
    - [Hono.js](https://hono.dev/) によりサーバーを構成する
    - [`hono/jsx`](https://hono.dev/docs/guides/jsx) により View を構成する
    - [Vitest](https://vitest.dev/) によりテストを構成する
    - ローカル環境において、標準ファイルシステムをストレージとして用いる
    - 本番環境において、Google Cloud Storage をストレージとして用いる
        - [Cloud Run へのボリュームマウント](https://cloud.google.com/run/docs/configuring/services/cloud-storage-volume-mounts?hl=ja) を利用するため、開発者が存在を意識することは無い
- **デザイン:**
    - モバイルファーストに基づき、`375px` の固定幅レイアウトを用いる
    - 機能性を重視した、ミニマルでクリーンなデザインとする
    - [Tailwind CSS v4](https://tailwindcss.com/) を、デザイントークンの管理に用いる
- **コード品質:**
    - 容赦なく重複を排除する
    - 命名と構造を通じて意図を明確に表現する
    - 依存関係を明示的にする
    - 関数を小さく保ち、単一の責任に集中させる
    - 状態と副作用を最小限に抑える
    - 動作する可能性のある最もシンプルな解決策を使用する
    - 依存ライブラリは最小限にし、組み込みライブラリを優先する


V. モジュール分割の考え方
-------------------------------------------------------------------------------

以下の考え方に基づいて、モジュールを分割し格納する：

- `src/models`
    - DDD におけるコアドメインを担うモジュール
        - 各モジュールには必ず単体テストを作成する
    - DDD における集約を担うモジュール
        - コードベースの理解を易しくするために、依存性の逆転は考慮しない
        - コードベースの理解を易しくするために、コマンドとクエリの責務分離は考慮しない
- `src/features`
    - DDD における支援サブドメインであり、各機能に対する体験設計を担うモジュール
    - `src/models` への依存を許容する
- `src/controllers`
    - HTTP Request の Context を (必要に応じて) 入力に取り、HTTP Response の組み立てを担うモジュール
    - 原理的には、逐次的凝集を満たす関数として実装できる
    - `src/models` および `src/features` への依存を許容する


VI. (発展課題) 追加開発する機能の例
-------------------------------------------------------------------------------

ベースアプリケーションに対して、さらに追加で開発を行う際のアイデア例を以下に示す。これにより、学生は自身の興味やスキルレベルに応じて取り組む課題を選択できる：

- **ユーザープロフィール拡充** : 各ユーザーのプロフィールページを作成し、そのユーザーが投稿したナレッジの一覧を表示する機能
- **画像アップロード機能** : ナレッジの本文中に画像をアップロードして表示できる機能
- **下書き機能** : ナレッジをすぐに公開せず、「下書き」として保存できる機能

こうした拡張に対して、ベースアプリケーションの実装は開かれていることが望ましい。


VII. 成果物
-------------------------------------------------------------------------------

- 上記要件を満たす Web アプリケーションのソースコード一式
